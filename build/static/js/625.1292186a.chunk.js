"use strict";(self.webpackChunkdnd_project=self.webpackChunkdnd_project||[]).push([[625],{4774:function(e,t,s){s.r(t),s.d(t,{default:function(){return y}});var n=s(4165),a=s(2982),r=s(5861),o=s(885),l=s(2791),i=s(4097),c=s(7774),u=s(1794),_=s(7506),d=s(2790),m=s(9138),f=s(6871),h=s(5294),p=s(184);function y(){var e=(0,i.x)(),t=e.isLoading,s=e.error,y=e.sendRequest,v=e.clearError,b=(0,l.useContext)(c.O),x=(0,l.useState)([]),Z=(0,o.Z)(x,2),S=Z[0],g=Z[1],C=(0,l.useState)([]),j=(0,o.Z)(C,2),k=j[0],D=j[1],w=(0,l.useState)(!1),E=(0,o.Z)(w,2),N=E[0],U=E[1],A=(0,l.useState)([]),O=(0,o.Z)(A,2),T=O[0],P=O[1],L=((0,f.s0)(),(new Date).getTime()),I=window.location.href.split("AllSessions/");(0,l.useEffect)((function(){var e=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(){var t,s,r,o,l,i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("https://danddragon.herokuapp.com"+"/myProfile/Sessions/AllSessions/".concat(I[1]),"GET",null,{Authorization:"Bearer "+b.token,"Content-Type":"application/json"});case 3:for(t=e.sent,g(t),P((0,a.Z)(t.dates)),"scheduled"===t.status&&P((0,a.Z)(t.scheduledFor)),s=0;s<t.votes.length;s++)if(r=t.votes[s],t.votes[s].user===b.userId){for(o=[],l=0;l<r.dates.length;l++)i=r.dates[l],o.push(new Date(i));D([].concat(o))}e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var B=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(S.timeforvoting<L)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,y("https://danddragon.herokuapp.com"+"/myProfile/Sessions/AllSessions/".concat(I[1]),"PATCH",JSON.stringify({dates:t,username:b.username,id:b.userId,calendarId:I[1]}),{Authorization:"Bearer "+b.token,"Content-Type":"application/json"});case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:window.location.reload();case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}();return(0,p.jsxs)(u.Z,{children:[t&&(0,p.jsx)(m.Z,{as0verlay:!0}),s&&(0,p.jsx)(d.Z,{header:"An Error Occurred",error:s,onClick:function(){v(null)}}),N&&(0,p.jsx)(h.Z,{title:"Are you shure about the date you put in ? There is no turning back.",onClick:B}),(0,p.jsx)(_.Z,{resData:S,selectedDatesFromDungonMaster:T,userAlreadySelectedDates:k,url:I[1],calendarButtonText:"Submit",onClickSubmit:function(e,t){U(!0)}})]})}},7795:function(e,t,s){s.d(t,{Z:function(){return o}});var n=s(885),a=s(2791),r=s(1415);function o(){var e=(0,r.Z)(),t=(0,a.useState)(480),s=(0,n.Z)(t,2),o=s[0],l=s[1];return(0,a.useEffect)((function(){e.width>1920&&l(540),e.width>1024&&e.width<1920&&l(480),e.width<1024&&e.width>420&&l(390),e.width<420&&l(330)}),[e.width]),o}},7506:function(e,t,s){s.d(t,{Z:function(){return j}});var n=s(4165),a=s(5861),r=s(885),o=s(2791),l=s(4097),i=s(7774),c=s(2982),u=s(5087),_=s(8589),d=s(2949),m=s(184);function f(e){var t=function(){var e=(0,o.useRef)();return(0,o.useEffect)((function(){return e.current.scrollIntoView()})),(0,m.jsx)("div",{ref:e})},s=(0,o.useState)([]),n=(0,r.Z)(s,2),a=n[0],l=n[1];return(0,o.useEffect)((function(){l([].concat((0,c.Z)(e.comments),(0,c.Z)(e.wscomments)))}),[e]),(0,m.jsxs)(_.Z,{className:e.className,children:[a&&a.map((function(t,s){return(0,m.jsxs)("div",{className:"".concat(d.Z.general_style," ").concat(e.thisUser===t.username?d.Z.sameuser__style:d.Z.diffuser__style),children:[e.thisUser!==t.username&&(0,m.jsx)("span",{dangerouslySetInnerHTML:{__html:t.username},className:"".concat(d.Z.username__style," ").concat(d.Z.general_comment__style," ")}),(0,m.jsx)("span",{dangerouslySetInnerHTML:{__html:t.comment},className:"".concat(d.Z.text__style,"  ").concat(d.Z.general_comment__style," ").concat(e.thisUser===t.username?d.Z.sameuser__bcccolor__style:d.Z.diffuser__bcccolor__style)})]},s)})),(0,m.jsx)(t,{})]})}function h(e){var t=(0,o.useState)(""),s=(0,r.Z)(t,2),_=s[0],h=s[1],p=(0,o.useState)(e.dbComments),y=(0,r.Z)(p,2),v=y[0],b=y[1],x=(0,o.useState)(v),Z=(0,r.Z)(x,2),S=Z[0],g=Z[1],C=(0,l.x)().sendRequest,j=(0,o.useContext)(i.O);(0,o.useEffect)((function(){b(e.dbComments)}),[e]);var k=window.location.href.split("/"),D="https://danddragon.herokuapp.com".replace("http","ws"),w=new u.w3cwebsocket("".concat(D,"/").concat(k[6]));(0,o.useEffect)((function(){w.onopen=function(){},w.onmessage=function(e){if("string"===typeof e.data){var t=JSON.parse(e.data);g([].concat((0,c.Z)(S),[t]))}},w.onerror=function(){}}),[w.onmessage,S]);var E=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==_.trim()){e.next=2;break}return e.abrupt("return");case 2:return w.send(JSON.stringify({comment:_,username:j.username})),e.prev=3,e.next=6,C("https://danddragon.herokuapp.com/myProfile/Sessions/AllSessions/comment","POST",JSON.stringify({title:_,username:j.username,id:j.userId,calendarId:k[6]}),{Authorization:"Bearer "+j.token,"Content-Type":"application/json"});case 6:h(""),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(3);case 11:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(){return e.apply(this,arguments)}}();return(0,m.jsxs)("div",{className:"".concat(d.Z.comment__big_box_holder," "),children:[(0,m.jsx)(f,{className:"black__background overflow flex_nowrap",thisUser:j.username,comments:v,wscomments:S}),(0,m.jsxs)("div",{className:"".concat(d.Z.comment__input__style," "),children:[(0,m.jsx)("input",{onChange:function(e){h(e.target.value)},placeholder:"Aa",value:_}),(0,m.jsxs)("button",{className:"button",onClick:E,children:[" ","Comment"]})]})]})}var p=s(9308),y=s(2702),v=s(2790),b=s(9138),x=s(5294),Z=s(6871),S=s(7081),g=s(7795),C=(s(7485),[{value:1,label:"1:00"},{value:2,label:"2:00"},{value:3,label:"3:00"},{value:4,label:"4:00"},{value:5,label:"5:00"},{value:6,label:"6:00"},{value:7,label:"7:00"},{value:8,label:"8:00"},{value:9,label:"9:00"},{value:10,label:"10:00"},{value:11,label:"11:00"},{value:12,label:"12:00"},{value:13,label:"13:00"},{value:14,label:"14:00"},{value:15,label:"15:00"},{value:16,label:"16:00"},{value:17,label:"17:00"},{value:18,label:"18:00"},{value:19,label:"19:00"},{value:20,label:"20:00"},{value:21,label:"21:00"},{value:22,label:"22:00"},{value:23,label:"23:00"},{value:24,label:"24:00"}]);function j(e){var t=(0,o.useState)([]),s=(0,r.Z)(t,2),c=s[0],u=s[1],_=(0,l.x)(),f=_.isLoading,j=_.error,k=_.sendRequest,D=_.clearError,w=(0,o.useState)(!1),E=(0,r.Z)(w,2),N=E[0],U=E[1],A=(0,o.useState)(!1),O=(0,r.Z)(A,2),T=O[0],P=O[1],L=(0,o.useState)(),I=(0,r.Z)(L,2),B=I[0],H=I[1],J=(0,g.Z)(),M=(0,o.useContext)(i.O),z=(0,Z.s0)();(0,o.useEffect)((function(){e.userAlreadySelectedDates&&e.userAlreadySelectedDates.length>0&&u(e.userAlreadySelectedDates)}),[e.userAlreadySelectedDates]);var F=function(e){for(var t=[],s=0;s<e.length;s++)t.push(new Date(e[s]).getTime());return t}("SCHEDULED"===e.resData.status?e.resData.scheduledFor:e.selectedDatesFromDungonMaster),q=function(){var t=(0,a.Z)((0,n.Z)().mark((function t(s){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!1!==s){t.next=3;break}return U(!1),t.abrupt("return");case 3:return t.prev=3,U(!1),t.next=7,k("https://danddragon.herokuapp.com"+"/myProfile/Sessions/MySessions/".concat(e.url),"POST",JSON.stringify({calendarId:e.url,status:"CLOSED"}),{Authorization:"Bearer "+M.token,"Content-Type":"application/json"});case 7:z("/myProfile/Sessions/AllSessions"),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(3);case 12:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e){return t.apply(this,arguments)}}(),R=function(){var t=(0,a.Z)((0,n.Z)().mark((function t(s){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!1!==s){t.next=3;break}return P(!1),t.abrupt("return");case 3:return t.prev=3,P(!1),t.next=7,k("https://danddragon.herokuapp.com"+"/myProfile/Sessions/MySessions/".concat(e.url),"DELETE",JSON.stringify({calendarId:e.url}),{Authorization:"Bearer "+M.token,"Content-Type":"application/json"});case 7:t.next=11;break;case 9:t.prev=9,t.t0=t.catch(3);case 11:z("/myProfile/Sessions/AllSessions");case 12:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e){return t.apply(this,arguments)}}();return(0,m.jsxs)(m.Fragment,{children:[f&&(0,m.jsx)(b.Z,{as0verlay:!0}),j&&(0,m.jsx)(v.Z,{header:"An Error Occurred",error:j,onClick:function(){D(null)}}),N&&(0,m.jsx)(x.Z,{title:"Are you shure that you want to CLOSE this session.",onClick:q}),T&&(0,m.jsx)(x.Z,{title:"Are you shure that you want to DELETE this session.",onClick:R}),(0,m.jsxs)("div",{children:[(0,m.jsxs)("div",{className:d.Z.info_about_session__style,children:[e.resData.timeforvoting&&(0,m.jsx)("span",{className:d.Z.countdown__style,children:(0,m.jsx)(y.ZP,{date:e.resData.timeforvoting})}),(0,m.jsxs)("span",{className:d.Z.organiser__span__style,children:["Invited by : ",e.resData.dmStatus&&"DM",e.resData.dmStatus&&e.resData.hostStatus&&" and a ",e.resData.hostStatus&&"HOST",(0,m.jsx)("span",{className:d.Z.organiser__span__style,children:e.resData.creatorName})]})]}),(0,m.jsxs)("div",{className:"".concat(d.Z.info_about_session__style),children:[(0,m.jsx)(p.f,{isDisabled:function(e){return!F.includes(e.getTime())},useDarkMode:!0,size:J,fontSize:18,value:"SCHEDULED"===e.resData.status?[new Date(e.resData.scheduledFor)]:c,isMultiSelector:!0,onChange:u}),(0,m.jsxs)("div",{className:"".concat(d.Z.schedule_buttons__style),children:["SCHEDULED"===e.resData.status||"CLOSED"===e.resData.status?null:(0,m.jsxs)("button",{style:{width:"38%"},className:"button",onClick:function(){e.onClickSubmit(c,B)},children:[" ",e.calendarButtonText]}),e.canCloseSession&&"SCHEDULED"!==e.resData.status&&"CLOSED"!==e.resData.status&&(0,m.jsx)(S.ZP,{options:C,name:"hours",onChange:function(e){H(e.value)},menuPlacement:"auto"}),e.canCloseSession&&("CLOSED"===e.resData.status?(0,m.jsxs)("button",{style:{width:"38%"},className:"button",onClick:function(){P(!0)},children:[" ","Delete Session"]}):(0,m.jsxs)("button",{style:{width:"38%"},className:"button",onClick:function(){U(!0)},children:[" ","Close Session"]}))]})]})]}),(0,m.jsx)(h,{dbComments:e.resData.comments||[]})]})}},1794:function(e,t,s){s.d(t,{Z:function(){return l}});var n="ConteinerBox_container_box__style__-eWp1",a="ConteinerBox_fromStart__WbIad",r="ConteinerBox_fromEnd__sBpfK",o=s(184);function l(e){return(0,o.jsx)("div",{className:"".concat(n," ").concat(e.fromStart&&a," ").concat(e.fromEnd&&r),children:e.children})}},5294:function(e,t,s){s.d(t,{Z:function(){return _}});var n=s(2791),a=s(4164),r=s(5730),o="Confirmation_btn__qOqTa",l="Confirmation_modal_big_box__style__QrDVi",i="Confirmation_confirm__style__ZM4vu",c="Confirmation_reject__style__Rdmy8",u=s(184);function _(e){var t=function(t){e.onClick(t)};return(0,u.jsxs)(n.Fragment,{children:[a.createPortal((0,u.jsx)(r.Z,{onClick:e.onClick}),document.getElementById("backdrop-root")),a.createPortal((0,u.jsxs)("div",{className:l,children:[(0,u.jsx)("span",{children:e.title}),(0,u.jsxs)("div",{children:[(0,u.jsx)("button",{className:"".concat(o," ").concat(i),onClick:function(){return t(!0)},children:"Yes"}),(0,u.jsx)("button",{className:"".concat(o," ").concat(c),onClick:function(){return t(!1)},children:"No"})]})]}),document.getElementById("overlay-root"))]})}},2949:function(e,t){t.Z={session_all__style:"sessionUi_session_all__style__U5dg1",user_session__style:"sessionUi_user_session__style__JxQVA",invited_session__style:"sessionUi_invited_session__style__3V4fi",scheduled_session__style:"sessionUi_scheduled_session__style__h8PlP",text__inside__style:"sessionUi_text__inside__style__mNQ8z",info_about_session__style:"sessionUi_info_about_session__style__iaxeH",countdown__style:"sessionUi_countdown__style__4jJtP",organiser__span__style:"sessionUi_organiser__span__style__CHtV+",comment__input__style:"sessionUi_comment__input__style__SIaYO",general_comment__style:"sessionUi_general_comment__style__lk599",username__style:"sessionUi_username__style__Jl+Dx",text__style:"sessionUi_text__style__rv2Je",sameuser__style:"sessionUi_sameuser__style__UwijL",general_style:"sessionUi_general_style__OmguC",sameuser__bcccolor__style:"sessionUi_sameuser__bcccolor__style__LgPIC",diffuser__style:"sessionUi_diffuser__style__zq+4r",diffuser__bcccolor__style:"sessionUi_diffuser__bcccolor__style__mF10f",schedule_buttons__style:"sessionUi_schedule_buttons__style__QNGwp",comment__big_box_holder:"sessionUi_comment__big_box_holder__c2BUl"}}}]);
//# sourceMappingURL=625.1292186a.chunk.js.map